# 需求文档 - 爱国红色答题与集卡奖励系统

## 简介

本系统是一个面向用户的爱国主义教育互动平台，通过答题和集卡两种方式激励用户学习红色文化知识，并提供福利奖励兑换功能。

## 术语表

- **系统 (System)**: 爱国红色答题与集卡奖励平台
- **用户 (User)**: 参与答题和集卡活动的普通用户
- **管理员 (Admin)**: 负责题库管理、福利码导入和系统配置的管理人员
- **题库 (Question Bank)**: 存储爱国红色主题题目的数据库
- **福利换取码 (Reward Code)**: 用户完成任务后可兑换实物或虚拟奖励的唯一码
- **集卡 (Card Collection)**: 用户通过答题或其他活动获得的虚拟卡片
- **卡组 (Card Set)**: 一组相关主题的卡片集合，集齐后可兑换奖励
- **签到 (Daily Check-in)**: 用户每日登录系统并点击签到按钮的行为
- **分享邀请 (Share & Invite)**: 用户将活动分享给好友或邀请新用户注册的行为
- **红色故事 (Red Story)**: 爱国主义教育相关的文章或视频内容
- **学习强国 (Xuexi Qiangguo)**: 中央宣传部主管的学习平台

## 需求

### 需求 1: 用户注册与登录

**用户故事:** 作为用户，我希望能够注册账号并登录系统，以便参与答题和集卡活动。

#### 验收标准

1. 系统应当提供用户注册功能，包含用户名、密码、手机号字段
2. 当用户提交注册信息时，系统应当验证用户名唯一性和手机号格式
3. 当用户输入正确的用户名和密码时，系统应当允许用户登录
4. 当用户连续 5 次输入错误密码时，系统应当锁定该账号 30 分钟
5. 当用户登录成功后，系统应当生成会话令牌并返回给用户

---

### 需求 2: 爱国红色题库管理

**用户故事:** 作为管理员，我希望能够管理题库内容，以便为用户提供丰富的答题内容。

#### 验收标准

1. 系统应当提供题目的增删改查功能
2. 当管理员创建题目时，系统应当要求填写题目内容、题目类型（单选/多选/判断）、选项、正确答案、知识点标签
3. 系统应当支持按知识点标签、难度等级筛选题目
4. 当管理员删除题目时，系统应当检查该题目是否在进行中的答题活动中使用
5. 如果题目正在使用中，系统应当阻止删除并提示管理员

---

### 需求 3: 答题功能

**用户故事:** 作为用户，我希望能够参与答题活动，以便学习红色文化知识并获得奖励。

#### 验收标准

1. 系统应当每日为用户生成一套包含 10 道题目的答题任务
2. 当用户开始答题时，系统应当记录答题开始时间
3. 当用户提交答案时，系统应当立即判断答案正确性并给出反馈
4. 当用户完成全部 10 道题目时，系统应当计算总分（每题 10 分）
5. 当用户得分达到 80 分及以上时，系统应当标记该用户为"今日答题合格"
6. 当用户答题合格后，系统应当随机发放 1-3 张卡片作为奖励

---

### 需求 4: 集卡系统

**用户故事:** 作为用户，我希望能够收集卡片并查看收集进度，以便集齐卡组兑换奖励。

#### 验收标准

1. 系统应当定义多个主题卡组，每个卡组包含 5-10 张不同的卡片
2. 当用户获得卡片时，系统应当将卡片添加到用户的卡册中
3. 系统应当显示用户当前拥有的卡片和各卡组的收集进度
4. 当用户获得重复卡片时，系统应当增加该卡片的数量计数
5. 当用户集齐某个卡组的全部卡片时，系统应当在卡组列表中标记为"已集齐"状态

---

### 需求 5: 福利换取码管理

**用户故事:** 作为管理员，我希望能够批量导入福利换取码，以便为用户提供实物或虚拟奖励。

#### 验收标准

1. 系统应当提供福利换取码批量导入功能，支持 CSV 或 Excel 文件格式
2. 当管理员上传文件时，系统应当验证文件格式和换取码唯一性
3. 系统应当为每个换取码关联奖励类型、奖励名称、有效期信息
4. 当导入成功后，系统应当显示导入的换取码数量和状态统计
5. 系统应当支持查看换取码的使用状态（未使用/已使用/已过期）

---

### 需求 6: 奖励兑换功能

**用户故事:** 作为用户，我希望能够使用集齐的卡组或答题积分兑换福利，以便获得实际奖励。

#### 验收标准

1. 系统应当提供奖励兑换页面，展示可兑换的奖励列表
2. 当用户选择兑换奖励时，系统应当检查用户是否满足兑换条件（集齐卡组或积分充足）
3. 当用户满足兑换条件时，系统应当从福利换取码池中分配一个未使用的换取码
4. 当分配成功后，系统应当将换取码标记为"已使用"并关联到用户账号
5. 当换取码池中无可用换取码时，系统应当提示"奖励已兑完，请稍后再试"
6. 系统应当记录用户的兑换历史，包括兑换时间、奖励名称、换取码

---

### 需求 7: 用户积分系统

**用户故事:** 作为用户，我希望通过答题和集卡活动积累积分，以便兑换更多奖励。

#### 验收标准

1. 系统应当为每个用户维护积分账户
2. 当用户每日答题合格时，系统应当奖励 10 积分
3. 当用户集齐一个卡组时，系统应当奖励 50 积分
4. 系统应当提供积分明细查询功能，显示积分来源和时间
5. 当用户兑换奖励时，系统应当根据奖励类型扣除相应积分

---

### 需求 8: 数据统计与报表

**用户故事:** 作为管理员，我希望查看系统的运营数据，以便了解用户活跃度和奖励发放情况。

#### 验收标准

1. 系统应当提供用户活跃度统计，包括每日答题人数、答题合格率
2. 系统应当提供卡片发放统计，包括各类型卡片的发放数量和分布
3. 系统应当提供奖励兑换统计，包括各类奖励的兑换次数和剩余换取码数量
4. 系统应当支持按日期范围筛选统计数据
5. 系统应当支持导出统计报表为 Excel 格式

---

### 需求 9: 每日签到功能

**用户故事:** 作为用户，我希望能够每日签到获得卡片奖励，以便增加卡片收集进度。

#### 验收标准

1. 系统应当提供每日签到入口，显示当前签到状态和连续签到天数
2. 当用户点击签到按钮时，系统应当检查用户当日是否已签到
3. 当用户当日首次签到时，系统应当随机发放 1 张卡片并增加连续签到天数
4. 当用户连续签到达到 7 天时，系统应当额外奖励 1 张稀有卡片
5. 当用户中断签到后，系统应当重置连续签到天数为 0

---

### 需求 10: 分享与邀请功能

**用户故事:** 作为用户，我希望能够分享活动给好友或邀请新用户注册，以便获得额外的卡片奖励。

#### 验收标准

1. 系统应当为每个用户生成唯一的邀请链接或邀请码
2. 当用户点击分享按钮时，系统应当生成包含邀请信息的分享内容
3. 当新用户通过邀请链接注册时，系统应当记录邀请关系
4. 当邀请的新用户完成首次答题时，系统应当向邀请人发放 2 张卡片作为奖励
5. 系统应当在用户中心显示邀请人数和获得的奖励统计

---

### 需求 11: 红色故事学习功能

**用户故事:** 作为用户，我希望能够阅读红色故事并跳转到学习强国平台深度学习，以便获得卡片奖励。

#### 验收标准

1. 系统应当提供红色故事列表，包含故事标题、封面图、简介
2. 当用户点击故事时，系统应当显示故事详情页面
3. 系统应当在故事详情页提供"前往学习强国深度学习"按钮
4. 当用户点击跳转按钮时，系统应当打开学习强国 App 或网页版对应内容
5. 当用户返回系统后，系统应当记录该用户已阅读该故事，并发放 1 张卡片
6. 系统应当限制每个故事每用户仅可获得一次卡片奖励

---

### 需求 12: 特殊活动管理

**用户故事:** 作为管理员，我希望能够创建限时特殊活动，以便在节假日或纪念日提升用户参与度。

#### 验收标准

1. 系统应当提供特殊活动创建功能，包含活动名称、活动时间、活动规则、奖励配置
2. 当管理员创建活动时，系统应当验证活动时间的合理性
3. 当活动生效时，系统应当在首页显示活动入口和倒计时
4. 当用户参与活动并完成任务时，系统应当按活动规则发放特殊卡片或额外积分
5. 当活动结束后，系统应当自动关闭活动入口并统计活动数据

---

### 需求 13: 福利换取码类型管理

**用户故事:** 作为管理员，我希望能够管理不同类型的第三方兑换码，以便为用户提供多样化的奖励选择。

#### 验收标准

1. 系统应当支持创建兑换码类型，包含类型名称、平台名称、面额、兑换说明
2. 当管理员导入换取码时，系统应当要求选择对应的兑换码类型
3. 系统应当在奖励兑换页面按类型分组展示可兑换的奖励
4. 当用户兑换成功后，系统应当显示兑换码和详细的使用说明
5. 系统应当支持查询各类型兑换码的库存数量和消耗速度

---

## 非功能性需求

### 性能需求

1. 系统应当在 2 秒内响应用户的答题提交请求
2. 系统应当支持至少 1000 个并发用户同时在线答题

### 安全需求

1. 系统应当对用户密码进行加密存储
2. 系统应当对管理员操作进行日志记录
3. 系统应当限制用户每日答题次数为 1 次，防止刷题作弊
4. 系统应当记录用户 IP 地址，当检测到同一 IP 短时间内注册多个账号时应当触发风控警告
5. 系统应当限制每道题目的最小答题时间为 3 秒，防止机器人自动答题
6. 系统应当对签到、分享、兑换等关键接口实施频率限制，单用户每分钟最多调用 10 次

### 可用性需求

1. 系统应当提供移动端适配，支持手机浏览器访问
2. 系统应当提供友好的错误提示信息
